<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NMT Vocab Booster</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —à—Ä–∏—Ñ—Ç –¥–ª—è —Å—Ç–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∞ -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f172a;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-color: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.5);
            --text-main: #ffffff;
            --text-secondary: #94a3b8;
            --success: #10b981;
            --error: #ef4444;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* –ó–∞–ø—Ä–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ */
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 40%);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        #app {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- Glassmorphism Utils --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, var(--accent-color), #2563eb);
            border: none;
            color: white;
            padding: 14px 28px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--accent-glow);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            background: #475569;
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--accent-color);
            box-shadow: none;
        }
        .btn-outline:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        /* --- Header --- */
        header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.2rem;
            background: linear-gradient(to right, #60a5fa, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- Screens --- */
        .screen {
            display: none; /* –°–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            flex-direction: column;
            padding: 20px;
            width: 100%;
            height: 100%;
            flex: 1;
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Start Screen Styling (NEW) --- */
        #start-screen {
            justify-content: center;
            align-items: center;
            /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø —Ö–µ–¥–µ—Ä–∞, —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Å–µ–π –≤—ã—Å–æ—Ç–µ –æ–∫–Ω–∞ */
            min-height: calc(100vh - 80px); 
        }

        .start-card {
            padding: 50px 40px;
            max-width: 440px;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
            background: rgba(15, 23, 42, 0.6); /* –ß—É—Ç—å —Ç–µ–º–Ω–µ–µ —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ */
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .start-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
        }

        .start-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .app-badge {
            background: rgba(255, 255, 255, 0.08);
            color: #60a5fa;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            padding: 6px 12px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(96, 165, 250, 0.2);
        }

        .hero-icon {
            font-size: 4.5rem;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.4));
            animation: float 4s ease-in-out infinite;
        }

        .hero-title {
            font-size: 3rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            line-height: 1.1;
            margin: 0 0 15px 0;
            background: linear-gradient(135deg, #ffffff 0%, #bfdbfe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 40px;
            max-width: 80%;
        }

        .btn-large {
            width: 100%;
            padding: 18px;
            font-size: 1rem;
            border-radius: 16px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* --- Level Select --- */
        #levels-screen {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding-bottom: 40px;
        }

        .level-card {
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 160px;
        }

        .level-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-color);
            transform: translateY(-5px);
        }

        .level-num {
            font-size: 4rem;
            font-weight: 800;
            color: rgba(255, 255, 255, 0.03);
            position: absolute;
            top: -10px;
            right: 10px;
            line-height: 1;
        }

        .level-info h3 { margin: 0 0 10px 0; font-size: 1.3rem; font-family: 'Montserrat', sans-serif; }
        .level-range { font-size: 0.9rem; color: var(--accent-color); font-weight: 600; margin-bottom: 5px; }
        .level-stats { font-size: 0.8rem; color: var(--text-secondary); display: flex; gap: 10px; }

        /* --- Intro Screen (Word List) --- */
        #intro-screen { max-width: 600px; margin: 0 auto; }
        
        .word-list {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 5px;
        }
        /* Scrollbar styling */
        .word-list::-webkit-scrollbar { width: 6px; }
        .word-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }
        
        .word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
        }
        .en-word { font-weight: 700; color: var(--accent-color); font-size: 1.1rem; }
        .ua-word { color: var(--text-secondary); }

        /* --- Task Screens --- */
        #task-screen { max-width: 800px; margin: 0 auto; }

        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .task-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .instruction {
            font-size: 1.2rem;
            color: #e2e8f0;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }

        /* Matching Task */
        .match-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .match-col { display: flex; flex-direction: column; gap: 12px; }
        .match-item {
            padding: 18px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
            border: 2px solid transparent; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 60px;
        }
        .match-item.selected { border-color: var(--accent-color); background: rgba(59, 130, 246, 0.15); box-shadow: 0 0 15px rgba(59,130,246,0.3); }
        .match-item.correct { border-color: var(--success); background: rgba(16, 185, 129, 0.15); pointer-events: none; opacity: 0.6; }
        .match-item.wrong { border-color: var(--error); background: rgba(239, 68, 68, 0.15); animation: shake 0.4s ease-in-out; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Gap Fill */
        .question-card {
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid transparent;
            padding: 18px;
            border-radius: 14px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            font-weight: 600;
        }
        .option-btn:hover { background: rgba(255,255,255,0.1); transform: translateY(-2px); }
        .option-btn.selected { border-color: var(--accent-color); background: rgba(59, 130, 246, 0.2); }
        .option-btn.correct { border-color: var(--success); background: rgba(16, 185, 129, 0.2); }
        .option-btn.wrong { border-color: var(--error); background: rgba(239, 68, 68, 0.2); }

        /* Story Gap Fill */
        .story-text {
            line-height: 2;
            font-size: 1.15rem;
            letter-spacing: 0.01em;
        }
        .gap-slot {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid var(--accent-color);
            color: var(--accent-color);
            text-align: center;
            cursor: pointer;
            margin: 0 4px;
            padding: 0 4px;
            font-weight: 600;
            transition: all 0.2s;
        }
        .gap-slot:hover { background: rgba(59, 130, 246, 0.1); }
        .gap-slot.filled { border-bottom-style: solid; color: #fff; }
        .gap-slot.correct { color: var(--success); border-color: var(--success); }
        .gap-slot.wrong { color: var(--error); border-color: var(--error); }
        
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--glass-border);
            justify-content: center;
        }
        .bank-item {
            background: rgba(255,255,255,0.08);
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            border: 2px solid transparent;
            font-weight: 500;
            transition: all 0.2s;
        }
        .bank-item:hover { background: rgba(255,255,255,0.15); }
        .bank-item.used {
            opacity: 0.3;
            cursor: default;
            transform: scale(0.95);
        }
        .bank-item.selected {
            border-color: var(--accent-color);
            background: rgba(59, 130, 246, 0.2);
            transform: scale(1.05);
        }

        /* Manual Input */
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 40px !important;
        }
        .manual-input {
            width: 100%;
            background: rgba(0,0,0,0.3);
            border: 2px solid var(--glass-border);
            color: white;
            padding: 18px;
            border-radius: 14px;
            font-size: 1.2rem;
            font-family: 'Inter', sans-serif;
            text-align: center;
            transition: all 0.3s;
        }
        .manual-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
        }

        /* Feedback Area */
        .feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            display: none;
            font-weight: 600;
            animation: fadeIn 0.3s;
        }
        .feedback-area.success { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; display: block; border: 1px solid rgba(16, 185, 129, 0.3); }
        .feedback-area.error { background: rgba(239, 68, 68, 0.2); color: #fca5a5; display: block; border: 1px solid rgba(239, 68, 68, 0.3); }

        /* Translation Tooltip Styles */
        .interactive-word {
            cursor: help;
            border-bottom: 1px dashed rgba(255,255,255,0.3);
            transition: all 0.2s;
            position: relative;
            user-select: text;
        }
        .interactive-word:hover {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            background: rgba(59, 130, 246, 0.1);
        }
        .translation-tooltip {
            position: absolute;
            bottom: 140%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #0f172a;
            color: #fff;
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 0.95rem;
            white-space: nowrap;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s, transform 0.2s;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
            font-weight: 500;
        }
        .translation-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: #0f172a transparent transparent transparent;
        }
        .interactive-word.show-tip .translation-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Mobile Responsive */
        @media (max-width: 600px) {
            .hero-title { font-size: 2.5rem; }
            .match-container { grid-template-columns: 1fr; }
            .options-grid { grid-template-columns: 1fr; }
            .start-card { padding: 40px 20px; width: 95%; }
            header { padding: 15px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">NMT Vocab Booster</div>
        <button id="home-btn" class="btn btn-outline" style="display: none; padding: 8px 16px; font-size: 0.8rem;">Exit</button>
    </header>

    <div id="app">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div class="glass-panel start-card">
                <div class="start-content">
                    <div class="app-badge">English Vocabulary</div>
                    <div class="hero-icon">üöÄ</div>
                    <h1 class="hero-title">Master<br>English</h1>
                    <p class="hero-subtitle">Comprehensive B1-B2 Level<br>Vocabulary Course</p>
                    <button class="btn btn-large" onclick="app.showLevels()">Start Journey</button>
                </div>
            </div>
        </div>

        <!-- Levels Screen -->
        <div id="levels-screen" class="screen">
            <h2 style="text-align: center; margin-bottom: 40px; font-size: 2rem; font-family: 'Montserrat', sans-serif;">Select Level</h2>
            <div class="levels-grid" id="levels-container">
                <!-- Generated by JS -->
            </div>
        </div>

        <!-- Intro Screen -->
        <div id="intro-screen" class="screen">
            <div class="glass-panel" style="padding: 30px; height: 100%; display: flex; flex-direction: column;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <span style="font-size: 0.9rem; color: var(--accent-color); text-transform: uppercase; letter-spacing: 1px;">Ready to learn?</span>
                    <h2 id="intro-title" style="margin: 10px 0 0 0; font-size: 1.8rem;">Words to Learn</h2>
                </div>
                
                <div id="intro-list" class="word-list"></div>
                
                <div style="margin-top: auto;">
                    <button class="btn" style="width: 100%" onclick="app.startTasks()">Start Mission</button>
                </div>
            </div>
        </div>

        <!-- Task Screen -->
        <div id="task-screen" class="screen">
            <div class="header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span id="task-type-label" style="font-size: 0.85rem; color: var(--accent-color); font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">Task Type</span>
                <span id="task-counter" style="font-size: 0.9rem; font-weight: 600; background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 10px;">1/4</span>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            
            <div class="glass-panel" style="padding: 30px; min-height: 450px; display: flex; flex-direction: column;">
                <p id="task-instruction" class="instruction"></p>
                
                <div id="task-content" class="task-container">
                    <!-- Dynamic Content -->
                </div>

                <div id="feedback-box" class="feedback-area"></div>

                <div style="margin-top: auto; padding-top: 30px; display: flex; gap: 15px;">
                    <button id="check-btn" class="btn" style="flex: 1;" onclick="app.checkAnswer()">Check Answer</button>
                    <button id="next-btn" class="btn" style="flex: 1; display: none; background: linear-gradient(135deg, #10b981, #059669);" onclick="app.nextTask()">Next Mission</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="result-screen" class="screen" style="justify-content: center; align-items: center; text-align: center;">
            <div class="glass-panel" style="padding: 50px; max-width: 500px; width: 100%;">
                <div style="font-size: 5rem; margin-bottom: 20px;">üèÜ</div>
                <h1 style="font-family: 'Montserrat', sans-serif; margin-bottom: 10px;">Level Complete!</h1>
                <p style="color: var(--text-secondary); margin-bottom: 30px;">You have successfully mastered all words in this level.</p>
                <button class="btn btn-large" onclick="app.showLevels()">Continue</button>
            </div>
        </div>
    </div>

<script>
// --- DATA ---
const courseData = {
  "meta": {
    "app_name": "NMT Vocab Booster",
    "total_words": 118,
    "total_levels": 10,
    "target_level": "B1-B2",
    "description": "Comprehensive vocabulary course. 10 Levels. Each level covers ~12 words with 4 mandatory task types."
  },
  "levels": [
    {
      "level_id": 1,
      "title": "Level 1: Foundations of Success",
      "words": [
        { "id": "w1", "word": "Ability", "translation": "–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å", "definition": "The physical or mental power or skill needed to do something." },
        { "id": "w2", "word": "Achievement", "translation": "–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è", "definition": "Something very good and difficult that you have succeeded in doing." },
        { "id": "w3", "word": "Advantage", "translation": "–ü–µ—Ä–µ–≤–∞–≥–∞", "definition": "A condition giving a greater chance of success." },
        { "id": "w4", "word": "Agreement", "translation": "–£–≥–æ–¥–∞, –¥–æ–º–æ–≤–ª–µ–Ω—ñ—Å—Ç—å", "definition": "A promise or decision made between two or more people." },
        { "id": "w5", "word": "Approach", "translation": "–ü—ñ–¥—Ö—ñ–¥", "definition": "A way of dealing with something or doing something." },
        { "id": "w6", "word": "Behaviour", "translation": "–ü–æ–≤–µ–¥—ñ–Ω–∫–∞", "definition": "The way that someone acts or behaves." },
        { "id": "w7", "word": "Benefit", "translation": "–ö–æ—Ä–∏—Å—Ç—å, –≤–∏–≥–æ–¥–∞", "definition": "A helpful or good effect, or something intended to help." },
        { "id": "w8", "word": "Choice", "translation": "–í–∏–±—ñ—Ä", "definition": "An act or the possibility of choosing." },
        { "id": "w9", "word": "Challenge", "translation": "–í–∏–∫–ª–∏–∫", "definition": "Something that needs great mental or physical effort in order to be done successfully." },
        { "id": "w10", "word": "Circumstance", "translation": "–û–±—Å—Ç–∞–≤–∏–Ω–∞, –≤–∏–ø–∞–¥–æ–∫", "definition": "A fact or event that makes a situation the way it is." },
        { "id": "w11", "word": "Consequence", "translation": "–ù–∞—Å–ª—ñ–¥–æ–∫", "definition": "A result of a particular action or situation, often one that is bad." },
        { "id": "w12", "word": "Contribution", "translation": "–í–Ω–µ—Å–æ–∫", "definition": "Something that you do or give to help produce or achieve something." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w1", "definition_ref": "w1" },
            { "word_id": "w2", "definition_ref": "w2" },
            { "word_id": "w3", "definition_ref": "w3" },
            { "word_id": "w4", "definition_ref": "w4" },
            { "word_id": "w5", "definition_ref": "w5" },
            { "word_id": "w6", "definition_ref": "w6" },
            { "word_id": "w7", "definition_ref": "w7" },
            { "word_id": "w8", "definition_ref": "w8" },
            { "word_id": "w9", "definition_ref": "w9" },
            { "word_id": "w10", "definition_ref": "w10" },
            { "word_id": "w11", "definition_ref": "w11" },
            { "word_id": "w12", "definition_ref": "w12" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word to complete the sentence.",
          "items": [
            { "question": "Her natural _____ to learn languages amazed her teachers.", "correct_word_id": "w1", "distractors": ["Advantage", "Agreement", "Approach"] },
            { "question": "Winning the competition was a great _____.", "correct_word_id": "w2", "distractors": ["Behaviour", "Agreement", "Ability"] },
            { "question": "Living in the city center has the _____ of being close to shops.", "correct_word_id": "w3", "distractors": ["Achievement", "Behaviour", "Agreement"] },
            { "question": "We finally reached an _____ regarding the price.", "correct_word_id": "w4", "distractors": ["Approach", "Ability", "Advantage"] },
            { "question": "We need a new _____ to solve this problem.", "correct_word_id": "w5", "distractors": ["Achievement", "Agreement", "Behaviour"] },
            { "question": "His aggressive _____ caused problems at work.", "correct_word_id": "w6", "distractors": ["Ability", "Advantage", "Approach"] },
            { "question": "Regular exercise has a huge _____ for your health.", "correct_word_id": "w7", "distractors": ["Choice", "Circumstance", "Consequence"] },
            { "question": "It was a difficult _____, but I think I picked the right university.", "correct_word_id": "w8", "distractors": ["Challenge", "Contribution", "Benefit"] },
            { "question": "Climbing that mountain was the biggest _____ of my life.", "correct_word_id": "w9", "distractors": ["Circumstance", "Choice", "Advantage"] },
            { "question": "Every action has a _____, so think before you act.", "correct_word_id": "w11", "distractors": ["Contribution", "Benefit", "Ability"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Read the text and fill in the gaps.",
          "text_template": "Tom felt that this year would be a major {{w9}} for him. He wanted to improve his academic {{w2}}, but his study habits were poor. He decided to change his {{w6}} and find a new {{w5}} to learning. It was a difficult {{w8}}, because it meant giving up video games. However, he knew the {{w7}} would be worth it. He made an {{w4}} with his parents: if he improved his grades, they would help him with a car. He understood that laziness would have a negative {{w11}} on his future.",
          "word_bank": ["w2", "w4", "w5", "w6", "w7", "w8", "w9", "w11"]
        },
        {
          "type": "manual_input",
          "instruction": "Type the English translation.",
          "items": [
            { "prompt": "–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å", "correct_word": "Ability" },
            { "prompt": "–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è", "correct_word": "Achievement" },
            { "prompt": "–ü–µ—Ä–µ–≤–∞–≥–∞", "correct_word": "Advantage" },
            { "prompt": "–£–≥–æ–¥–∞, –¥–æ–º–æ–≤–ª–µ–Ω—ñ—Å—Ç—å", "correct_word": "Agreement" },
            { "prompt": "–ü—ñ–¥—Ö—ñ–¥", "correct_word": "Approach" },
            { "prompt": "–ü–æ–≤–µ–¥—ñ–Ω–∫–∞", "correct_word": "Behaviour" },
            { "prompt": "–ö–æ—Ä–∏—Å—Ç—å, –≤–∏–≥–æ–¥–∞", "correct_word": "Benefit" },
            { "prompt": "–í–∏–±—ñ—Ä", "correct_word": "Choice" },
            { "prompt": "–í–∏–∫–ª–∏–∫", "correct_word": "Challenge" },
            { "prompt": "–û–±—Å—Ç–∞–≤–∏–Ω–∞", "correct_word": "Circumstance" },
            { "prompt": "–ù–∞—Å–ª—ñ–¥–æ–∫", "correct_word": "Consequence" },
            { "prompt": "–í–Ω–µ—Å–æ–∫", "correct_word": "Contribution" }
          ]
        }
      ]
    },
    {
      "level_id": 2,
      "title": "Level 2: Decisions & Environment",
      "words": [
        { "id": "w13", "word": "Decision", "translation": "–†—ñ—à–µ–Ω–Ω—è", "definition": "A choice that you make about something after thinking." },
        { "id": "w14", "word": "Development", "translation": "–†–æ–∑–≤–∏—Ç–æ–∫", "definition": "The process in which someone or something grows or changes and becomes more advanced." },
        { "id": "w15", "word": "Education", "translation": "–û—Å–≤—ñ—Ç–∞", "definition": "The process of teaching or learning, especially in a school or college." },
        { "id": "w16", "word": "Effort", "translation": "–ó—É—Å–∏–ª–ª—è", "definition": "Physical or mental activity needed to achieve something." },
        { "id": "w17", "word": "Environment", "translation": "–î–æ–≤–∫—ñ–ª–ª—è", "definition": "The air, water, and land in or on which people, animals, and plants live." },
        { "id": "w18", "word": "Experience", "translation": "–î–æ—Å–≤—ñ–¥", "definition": "Knowledge or skill that comes from having done certain things." },
        { "id": "w19", "word": "Condition", "translation": "–£–º–æ–≤–∞", "definition": "The particular state that something or someone is in." },
        { "id": "w20", "word": "Contest", "translation": "–ö–æ–Ω–∫—É—Ä—Å, –∑–º–∞–≥–∞–Ω–Ω—è", "definition": "A competition to do better than other people, usually in which prizes are given." },
        { "id": "w21", "word": "Appearance", "translation": "–ó–æ–≤–Ω—ñ—à–Ω—ñ—Å—Ç—å", "definition": "The way a person or thing looks to other people." },
        { "id": "w22", "word": "Evidence", "translation": "–î–æ–∫–∞–∑", "definition": "Anything that helps to prove that something is or is not true." },
        { "id": "w23", "word": "Failure", "translation": "–ù–µ–≤–¥–∞—á–∞", "definition": "The fact of someone or something not succeeding." },
        { "id": "w24", "word": "Feature", "translation": "–†–∏—Å–∞, –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å", "definition": "A typical quality or an important part of something." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w13", "definition_ref": "w13" }, { "word_id": "w14", "definition_ref": "w14" }, { "word_id": "w15", "definition_ref": "w15" }, { "word_id": "w16", "definition_ref": "w16" }, { "word_id": "w17", "definition_ref": "w17" }, { "word_id": "w18", "definition_ref": "w18" },
            { "word_id": "w19", "definition_ref": "w19" }, { "word_id": "w20", "definition_ref": "w20" }, { "word_id": "w21", "definition_ref": "w21" }, { "word_id": "w22", "definition_ref": "w22" }, { "word_id": "w23", "definition_ref": "w23" }, { "word_id": "w24", "definition_ref": "w24" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "It was a difficult _____ to move to another country.", "correct_word_id": "w13", "distractors": ["Development", "Environment", "Effort"] },
            { "question": "The rapid _____ of technology is amazing.", "correct_word_id": "w14", "distractors": ["Decision", "Experience", "Education"] },
            { "question": "University _____ is expensive in some countries.", "correct_word_id": "w15", "distractors": ["Effort", "Environment", "Decision"] },
            { "question": "He put a lot of _____ into his project.", "correct_word_id": "w16", "distractors": ["Education", "Development", "Experience"] },
            { "question": "We must protect the _____ from pollution.", "correct_word_id": "w17", "distractors": ["Decision", "Effort", "Development"] },
            { "question": "The car is in excellent _____.", "correct_word_id": "w19", "distractors": ["Contest", "Failure", "Evidence"] },
            { "question": "She entered a beauty _____.", "correct_word_id": "w20", "distractors": ["Condition", "Feature", "Appearance"] },
            { "question": "He changed his _____ by growing a beard.", "correct_word_id": "w21", "distractors": ["Evidence", "Contest", "Failure"] },
            { "question": "There is no scientific _____ to support this theory.", "correct_word_id": "w22", "distractors": ["Appearance", "Condition", "Feature"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "After finishing his {{w15}}, Mark made a big {{w13}}. He wanted to work in sustainable {{w14}}. He knew it would take a lot of {{w16}}, but he cared about the {{w17}}. Although he lacked practical {{w18}}, his passion helped him find a job. However, his first project was a {{w23}}. The main {{w24}} of the plan was flawed. He looked for {{w22}} to see what went wrong and found that the {{w19}} of the soil was poor.",
          "word_bank": ["w13", "w14", "w15", "w16", "w17", "w18", "w19", "w22", "w23", "w24"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–†—ñ—à–µ–Ω–Ω—è", "correct_word": "Decision" }, { "prompt": "–†–æ–∑–≤–∏—Ç–æ–∫", "correct_word": "Development" }, { "prompt": "–û—Å–≤—ñ—Ç–∞", "correct_word": "Education" }, { "prompt": "–ó—É—Å–∏–ª–ª—è", "correct_word": "Effort" }, { "prompt": "–î–æ–≤–∫—ñ–ª–ª—è", "correct_word": "Environment" }, { "prompt": "–î–æ—Å–≤—ñ–¥", "correct_word": "Experience" },
            { "prompt": "–£–º–æ–≤–∞", "correct_word": "Condition" }, { "prompt": "–ö–æ–Ω–∫—É—Ä—Å", "correct_word": "Contest" }, { "prompt": "–ó–æ–≤–Ω—ñ—à–Ω—ñ—Å—Ç—å", "correct_word": "Appearance" }, { "prompt": "–î–æ–∫–∞–∑", "correct_word": "Evidence" }, { "prompt": "–ù–µ–≤–¥–∞—á–∞", "correct_word": "Failure" }, { "prompt": "–†–∏—Å–∞, –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å", "correct_word": "Feature" }
          ]
        }
      ]
    },
    {
      "level_id": 3,
      "title": "Level 3: Personal Growth & Society",
      "words": [
        { "id": "w25", "word": "Freedom", "translation": "–°–≤–æ–±–æ–¥–∞", "definition": "The condition or right of being able or allowed to do whatever you want." },
        { "id": "w26", "word": "Identity", "translation": "–û—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å", "definition": "Who a person is, or the qualities that make them different from others." },
        { "id": "w27", "word": "Improvement", "translation": "–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è", "definition": "An occasion when something gets better or when you make it better." },
        { "id": "w28", "word": "Income", "translation": "–î–æ—Ö—ñ–¥", "definition": "Money that is earned from doing work or received from investments." },
        { "id": "w29", "word": "Influence", "translation": "–í–ø–ª–∏–≤", "definition": "The power to have an effect on people or things." },
        { "id": "w30", "word": "Proficiency", "translation": "–ú–∞–π—Å—Ç–µ—Ä—Å—Ç–≤–æ, –≤–º—ñ–Ω–Ω—è", "definition": "Great skill, ability, and experience." },
        { "id": "w31", "word": "Applicant", "translation": "–ó–∞—è–≤–Ω–∏–∫, –∫–∞–Ω–¥–∏–¥–∞—Ç", "definition": "A person who formally requests something, especially a job." },
        { "id": "w32", "word": "Knowledge", "translation": "–ó–Ω–∞–Ω–Ω—è", "definition": "Understanding of or information about a subject that you get by experience or study." },
        { "id": "w33", "word": "Opportunity", "translation": "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å", "definition": "An occasion or situation that makes it possible to do something." },
        { "id": "w34", "word": "Frustration", "translation": "–†–æ–∑—á–∞—Ä—É–≤–∞–Ω–Ω—è", "definition": "The feeling of being annoyed or less confident because you cannot achieve what you want." },
        { "id": "w35", "word": "Attitude", "translation": "–°—Ç–∞–≤–ª–µ–Ω–Ω—è", "definition": "A feeling or opinion about something or someone, or a way of behaving." },
        { "id": "w36", "word": "Patience", "translation": "–¢–µ—Ä–ø—ñ–Ω–Ω—è", "definition": "The ability to wait, or to continue doing something despite difficulties." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words.",
          "items": [
            { "word_id": "w25", "definition_ref": "w25" }, { "word_id": "w26", "definition_ref": "w26" }, { "word_id": "w27", "definition_ref": "w27" }, { "word_id": "w28", "definition_ref": "w28" }, { "word_id": "w29", "definition_ref": "w29" }, { "word_id": "w30", "definition_ref": "w30" },
            { "word_id": "w31", "definition_ref": "w31" }, { "word_id": "w32", "definition_ref": "w32" }, { "word_id": "w33", "definition_ref": "w33" }, { "word_id": "w34", "definition_ref": "w34" }, { "word_id": "w35", "definition_ref": "w35" }, { "word_id": "w36", "definition_ref": "w36" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "They fought for their _____.", "correct_word_id": "w25", "distractors": ["Income", "Identity", "Proficiency"] },
            { "question": "The job requires _____ in English.", "correct_word_id": "w30", "distractors": ["Influence", "Income", "Improvement"] },
            { "question": "Social media has a big _____ on teenagers.", "correct_word_id": "w29", "distractors": ["Income", "Identity", "Freedom"] },
            { "question": "The _____ must have a driver's license.", "correct_word_id": "w31", "distractors": ["Knowledge", "Freedom", "Improvement"] },
            { "question": "This job is a great _____ for you.", "correct_word_id": "w33", "distractors": ["Frustration", "Applicant", "Attitude"] },
            { "question": "I can understand your _____ with this slow computer.", "correct_word_id": "w34", "distractors": ["Knowledge", "Opportunity", "Freedom"] },
            { "question": "He has a very positive _____ towards work.", "correct_word_id": "w35", "distractors": ["Patience", "Income", "Applicant"] },
            { "question": "Teaching kids requires a lot of _____.", "correct_word_id": "w36", "distractors": ["Freedom", "Attitude", "Identity"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "Sarah was a hopeful {{w31}} for a management job. She had a lot of {{w32}}, but she lacked {{w36}}. When she didn't get the job, she felt deep {{w34}}. However, she decided to change her {{w35}}. She saw this as an {{w33}} for self-{{w27}}. She realized that her {{w26}} wasn't defined by her {{w28}}. She wanted the {{w25}} to choose a career that matched her values.",
          "word_bank": ["w25", "w26", "w27", "w28", "w31", "w32", "w33", "w34", "w35", "w36"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–°–≤–æ–±–æ–¥–∞", "correct_word": "Freedom" }, { "prompt": "–û—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å", "correct_word": "Identity" }, { "prompt": "–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è", "correct_word": "Improvement" }, { "prompt": "–î–æ—Ö—ñ–¥", "correct_word": "Income" }, { "prompt": "–í–ø–ª–∏–≤", "correct_word": "Influence" }, { "prompt": "–ú–∞–π—Å—Ç–µ—Ä—Å—Ç–≤–æ", "correct_word": "Proficiency" },
            { "prompt": "–ó–∞—è–≤–Ω–∏–∫", "correct_word": "Applicant" }, { "prompt": "–ó–Ω–∞–Ω–Ω—è", "correct_word": "Knowledge" }, { "prompt": "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å", "correct_word": "Opportunity" }, { "prompt": "–†–æ–∑—á–∞—Ä—É–≤–∞–Ω–Ω—è", "correct_word": "Frustration" }, { "prompt": "–°—Ç–∞–≤–ª–µ–Ω–Ω—è", "correct_word": "Attitude" }, { "prompt": "–¢–µ—Ä–ø—ñ–Ω–Ω—è", "correct_word": "Patience" }
          ]
        }
      ]
    },
    {
      "level_id": 4,
      "title": "Level 4: Health & Society",
      "words": [
        { "id": "w37", "word": "Performance", "translation": "–í–∏—Å—Ç—É–ø, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å", "definition": "How well a person, machine, etc. does a piece of work or an activity." },
        { "id": "w38", "word": "Permission", "translation": "–î–æ–∑–≤—ñ–ª", "definition": "If you are given permission to do something, you are allowed to do it." },
        { "id": "w39", "word": "Pollution", "translation": "–ó–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è", "definition": "Damage caused to water, air, etc. by harmful substances or waste." },
        { "id": "w40", "word": "Distancing", "translation": "–í—ñ–¥–¥–∞–ª–µ–Ω–Ω—è", "definition": "The act of keeping a distance from someone or something." },
        { "id": "w41", "word": "Description", "translation": "–û–ø–∏—Å", "definition": "Something that tells you what something or someone is like." },
        { "id": "w42", "word": "Direction", "translation": "–ù–∞–ø—Ä—è–º", "definition": "The position towards which someone or something moves or faces." },
        { "id": "w43", "word": "Medication", "translation": "–õ—ñ–∫–∏", "definition": "A medicine, or a set of medicines or drugs, used to improve a particular condition or illness." },
        { "id": "w44", "word": "Celebration", "translation": "–°–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è", "definition": "A special social event, such as a party, when you celebrate something." },
        { "id": "w45", "word": "Physician", "translation": "–õ—ñ–∫–∞—Ä, —Ç–µ—Ä–∞–ø–µ–≤—Ç", "definition": "A medical doctor, especially one who has general skill and is not a surgeon." },
        { "id": "w46", "word": "Treatment", "translation": "–õ—ñ–∫—É–≤–∞–Ω–Ω—è", "definition": "The use of drugs, exercises, etc. to cure a person of an illness or injury." },
        { "id": "w47", "word": "Damage", "translation": "–®–∫–æ–¥–∞, –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è", "definition": "Harm or injury." },
        { "id": "w48", "word": "Symptom", "translation": "–°–∏–º–ø—Ç–æ–º", "definition": "Any feeling of illness or physical or mental change that is caused by a particular disease." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w37", "definition_ref": "w37" }, { "word_id": "w38", "definition_ref": "w38" }, { "word_id": "w39", "definition_ref": "w39" }, { "word_id": "w40", "definition_ref": "w40" }, { "word_id": "w41", "definition_ref": "w41" }, { "word_id": "w42", "definition_ref": "w42" },
            { "word_id": "w43", "definition_ref": "w43" }, { "word_id": "w44", "definition_ref": "w44" }, { "word_id": "w45", "definition_ref": "w45" }, { "word_id": "w46", "definition_ref": "w46" }, { "word_id": "w47", "definition_ref": "w47" }, { "word_id": "w48", "definition_ref": "w48" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "Her _____ in the school play was amazing.", "correct_word_id": "w37", "distractors": ["Permission", "Pollution", "Symptom"] },
            { "question": "You need official _____ to park here.", "correct_word_id": "w38", "distractors": ["Performance", "Celebration", "Direction"] },
            { "question": "Air _____ is a major problem in big cities.", "correct_word_id": "w39", "distractors": ["Medication", "Pollution", "Treatment"] },
            { "question": "Can you give me a brief _____ of the thief?", "correct_word_id": "w41", "distractors": ["Description", "Direction", "Distancing"] },
            { "question": "Are you sure we are driving in the right _____?", "correct_word_id": "w42", "distractors": ["Direction", "Description", "Damage"] },
            { "question": "The doctor prescribed some new _____.", "correct_word_id": "w43", "distractors": ["Celebration", "Medication", "Pollution"] },
            { "question": "We had a big _____ for her birthday.", "correct_word_id": "w44", "distractors": ["Celebration", "Performance", "Treatment"] },
            { "question": "The storm caused a lot of _____ to the house.", "correct_word_id": "w47", "distractors": ["Damage", "Symptom", "Permission"] },
            { "question": "A common _____ of the flu is a high fever.", "correct_word_id": "w48", "distractors": ["Symptom", "Physician", "Description"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "John didn't feel well. His main {{w48}} was a terrible headache. He decided to visit a {{w45}}. The doctor asked for a {{w41}} of his pain. After the exam, the doctor said there was no permanent {{w47}}, but he needed immediate {{w46}}. He gave John a prescription for strong {{w43}}. He also advised social {{w40}} until he felt better, so he had to miss the {{w44}} at work.",
          "word_bank": ["w40", "w41", "w43", "w44", "w45", "w46", "w47", "w48"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–í–∏—Å—Ç—É–ø, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å", "correct_word": "Performance" }, { "prompt": "–î–æ–∑–≤—ñ–ª", "correct_word": "Permission" }, { "prompt": "–ó–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è", "correct_word": "Pollution" }, { "prompt": "–í—ñ–¥–¥–∞–ª–µ–Ω–Ω—è", "correct_word": "Distancing" }, { "prompt": "–û–ø–∏—Å", "correct_word": "Description" }, { "prompt": "–ù–∞–ø—Ä—è–º", "correct_word": "Direction" },
            { "prompt": "–õ—ñ–∫–∏", "correct_word": "Medication" }, { "prompt": "–°–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è", "correct_word": "Celebration" }, { "prompt": "–õ—ñ–∫–∞—Ä, —Ç–µ—Ä–∞–ø–µ–≤—Ç", "correct_word": "Physician" }, { "prompt": "–õ—ñ–∫—É–≤–∞–Ω–Ω—è", "correct_word": "Treatment" }, { "prompt": "–®–∫–æ–¥–∞, –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è", "correct_word": "Damage" }, { "prompt": "–°–∏–º–ø—Ç–æ–º", "correct_word": "Symptom" }
          ]
        }
      ]
    },
    {
      "level_id": 5,
      "title": "Level 5: Emotion & Organization",
      "words": [
        { "id": "w49", "word": "Dismay", "translation": "–ó–±–µ–Ω—Ç–µ–∂–µ–Ω–Ω—è, —Ç—Ä–∏–≤–æ–≥–∞", "definition": "A feeling of unhappiness and disappointment." },
        { "id": "w50", "word": "Cancellation", "translation": "–í—ñ–¥–º—ñ–Ω–∞", "definition": "The act of deciding that an organized event will not happen." },
        { "id": "w51", "word": "Announcement", "translation": "–û–≥–æ–ª–æ—à–µ–Ω–Ω—è", "definition": "Something that someone says officially, giving information about something." },
        { "id": "w52", "word": "Delivery", "translation": "–î–æ—Å—Ç–∞–≤–∫–∞, –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è", "definition": "The act of taking goods, letters, parcels, etc. to people's houses or places of work." },
        { "id": "w53", "word": "Anxiety", "translation": "–¢—Ä–∏–≤–æ–≥–∞, –∑–∞–Ω–µ–ø–æ–∫–æ—î–Ω–Ω—è", "definition": "An uncomfortable feeling of nervousness or worry about something." },
        { "id": "w54", "word": "Awareness", "translation": "–£—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è", "definition": "Knowledge that something exists, or understanding of a situation." },
        { "id": "w55", "word": "Responsibility", "translation": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å", "definition": "Something that it is your job or duty to deal with." },
        { "id": "w56", "word": "Attempt", "translation": "–°–ø—Ä–æ–±–∞", "definition": "The act of trying to do something, especially something difficult." },
        { "id": "w57", "word": "Weakness", "translation": "–°–ª–∞–±–∫—ñ—Å—Ç—å", "definition": "The fact or state of not being strong or powerful." },
        { "id": "w58", "word": "Rivalry", "translation": "–°—É–ø–µ—Ä–Ω–∏—Ü—Ç–≤–æ", "definition": "A situation in which people, businesses, etc. compete with each other for the same thing." },
        { "id": "w59", "word": "Capacity", "translation": "–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å, —î–º–Ω—ñ—Å—Ç—å", "definition": "The total amount that can be contained or produced." },
        { "id": "w60", "word": "Population", "translation": "–ù–∞—Å–µ–ª–µ–Ω–Ω—è", "definition": "All the people living in a particular country, area, or place." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w49", "definition_ref": "w49" }, { "word_id": "w50", "definition_ref": "w50" }, { "word_id": "w51", "definition_ref": "w51" }, { "word_id": "w52", "definition_ref": "w52" }, { "word_id": "w53", "definition_ref": "w53" }, { "word_id": "w54", "definition_ref": "w54" },
            { "word_id": "w55", "definition_ref": "w55" }, { "word_id": "w56", "definition_ref": "w56" }, { "word_id": "w57", "definition_ref": "w57" }, { "word_id": "w58", "definition_ref": "w58" }, { "word_id": "w59", "definition_ref": "w59" }, { "word_id": "w60", "definition_ref": "w60" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "To our _____, the tickets were sold out.", "correct_word_id": "w49", "distractors": ["Dismay", "Delivery", "Awareness"] },
            { "question": "The _____ of the flight caused a lot of problems.", "correct_word_id": "w50", "distractors": ["Cancellation", "Attempt", "Responsibility"] },
            { "question": "The president made an important _____ on TV.", "correct_word_id": "w51", "distractors": ["Rivalry", "Announcement", "Capacity"] },
            { "question": "Wait for the _____ of your package.", "correct_word_id": "w52", "distractors": ["Delivery", "Weakness", "Anxiety"] },
            { "question": "Public _____ of the disease has increased.", "correct_word_id": "w54", "distractors": ["Awareness", "Rivalry", "Capacity"] },
            { "question": "It is your _____ to clean your room.", "correct_word_id": "w55", "distractors": ["Responsibility", "Weakness", "Dismay"] },
            { "question": "This is my second _____ to pass the exam.", "correct_word_id": "w56", "distractors": ["Attempt", "Cancellation", "Delivery"] },
            { "question": "There is a strong _____ between the two teams.", "correct_word_id": "w58", "distractors": ["Rivalry", "Anxiety", "Capacity"] },
            { "question": "The stadium has a _____ of 50,000 people.", "correct_word_id": "w59", "distractors": ["Capacity", "Population", "Weakness"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "The company made an official {{w51}} about the new product. However, there was a problem with the {{w52}} system. This caused {{w53}} among the customers. The manager took full {{w55}} for the mistake. It was a failed {{w56}} to beat their competitors, and the {{w58}} between the companies grew. To their {{w49}}, they had to announce the {{w50}} of all orders.",
          "word_bank": ["w49", "w50", "w51", "w52", "w53", "w55", "w56", "w58"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–ó–±–µ–Ω—Ç–µ–∂–µ–Ω–Ω—è, —Ç—Ä–∏–≤–æ–≥–∞", "correct_word": "Dismay" }, { "prompt": "–í—ñ–¥–º—ñ–Ω–∞", "correct_word": "Cancellation" }, { "prompt": "–û–≥–æ–ª–æ—à–µ–Ω–Ω—è", "correct_word": "Announcement" }, { "prompt": "–î–æ—Å—Ç–∞–≤–∫–∞", "correct_word": "Delivery" }, { "prompt": "–¢—Ä–∏–≤–æ–≥–∞, –∑–∞–Ω–µ–ø–æ–∫–æ—î–Ω–Ω—è", "correct_word": "Anxiety" }, { "prompt": "–£—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è", "correct_word": "Awareness" },
            { "prompt": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å", "correct_word": "Responsibility" }, { "prompt": "–°–ø—Ä–æ–±–∞", "correct_word": "Attempt" }, { "prompt": "–°–ª–∞–±–∫—ñ—Å—Ç—å", "correct_word": "Weakness" }, { "prompt": "–°—É–ø–µ—Ä–Ω–∏—Ü—Ç–≤–æ", "correct_word": "Rivalry" }, { "prompt": "–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å, —î–º–Ω—ñ—Å—Ç—å", "correct_word": "Capacity" }, { "prompt": "–ù–∞—Å–µ–ª–µ–Ω–Ω—è", "correct_word": "Population" }
          ]
        }
      ]
    },
    {
      "level_id": 6,
      "title": "Level 6: Business & Values",
      "words": [
        { "id": "w61", "word": "Possibility", "translation": "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å", "definition": "A chance that something may happen or be true." },
        { "id": "w62", "word": "Conscience", "translation": "–°–æ–≤—ñ—Å—Ç—å", "definition": "The part of you that judges how moral your own actions are." },
        { "id": "w63", "word": "Mindfulness", "translation": "–£–≤–∞–∂–Ω—ñ—Å—Ç—å", "definition": "The practice of being aware of your body, mind, and feelings in the present moment." },
        { "id": "w64", "word": "Protection", "translation": "–ó–∞—Ö–∏—Å—Ç", "definition": "The act of protecting or state of being protected." },
        { "id": "w65", "word": "Pressure", "translation": "–¢–∏—Å–∫", "definition": "A difficult situation that makes you feel worried or unhappy." },
        { "id": "w66", "word": "Profit", "translation": "–ü—Ä–∏–±—É—Ç–æ–∫", "definition": "Money that is earned in trade or business after paying the costs." },
        { "id": "w67", "word": "Reliability", "translation": "–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å", "definition": "The quality of being able to be trusted or believed." },
        { "id": "w68", "word": "Verification", "translation": "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞", "definition": "The act of verifying something (proving it is true)." },
        { "id": "w69", "word": "Purpose", "translation": "–ú–µ—Ç–∞", "definition": "Why you do something or why something exists." },
        { "id": "w70", "word": "Quality", "translation": "–Ø–∫—ñ—Å—Ç—å", "definition": "How good or bad something is." },
        { "id": "w71", "word": "Quantity", "translation": "–ö—ñ–ª—å–∫—ñ—Å—Ç—å", "definition": "The amount or number of something." },
        { "id": "w72", "word": "Side effect", "translation": "–°—Ç–æ—Ä–æ–Ω–Ω—ñ–π –µ—Ñ–µ–∫—Ç", "definition": "An unpleasant effect of a drug that happens in addition to the main effect." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w61", "definition_ref": "w61" }, { "word_id": "w62", "definition_ref": "w62" }, { "word_id": "w63", "definition_ref": "w63" }, { "word_id": "w64", "definition_ref": "w64" }, { "word_id": "w65", "definition_ref": "w65" }, { "word_id": "w66", "definition_ref": "w66" },
            { "word_id": "w67", "definition_ref": "w67" }, { "word_id": "w68", "definition_ref": "w68" }, { "word_id": "w69", "definition_ref": "w69" }, { "word_id": "w70", "definition_ref": "w70" }, { "word_id": "w71", "definition_ref": "w71" }, { "word_id": "w72", "definition_ref": "w72" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "There is a strong _____ of rain today.", "correct_word_id": "w61", "distractors": ["Possibility", "Profit", "Protection"] },
            { "question": "His _____ wouldn't let him lie to his mother.", "correct_word_id": "w62", "distractors": ["Conscience", "Pressure", "Purpose"] },
            { "question": "Wear a helmet for head _____.", "correct_word_id": "w64", "distractors": ["Protection", "Quality", "Side effect"] },
            { "question": "She is under a lot of _____ at work.", "correct_word_id": "w65", "distractors": ["Pressure", "Quantity", "Verification"] },
            { "question": "The company made a huge _____ this year.", "correct_word_id": "w66", "distractors": ["Profit", "Conscience", "Mindfulness"] },
            { "question": "I doubt the _____ of this car; it breaks often.", "correct_word_id": "w67", "distractors": ["Reliability", "Purpose", "Pressure"] },
            { "question": "The main _____ of this meeting is to decide the budget.", "correct_word_id": "w69", "distractors": ["Purpose", "Side effect", "Possibility"] },
            { "question": "We prefer _____ over quantity.", "correct_word_id": "w70", "distractors": ["Quality", "Verification", "Pressure"] },
            { "question": "Sleepiness is a common _____ of this medicine.", "correct_word_id": "w72", "distractors": ["Side effect", "Profit", "Purpose"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "The factory manager had a clear {{w69}}: to increase {{w66}}. However, he put too much {{w65}} on the workers. They focused on {{w71}} instead of {{w70}}. This led to problems with product {{w67}}. The {{w68}} process showed many errors. The manager had a guilty {{w62}} because he ignored safety {{w64}} rules. There was a {{w61}} that the factory would close.",
          "word_bank": ["w61", "w62", "w64", "w65", "w66", "w67", "w68", "w69", "w70", "w71"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å", "correct_word": "Possibility" }, { "prompt": "–°–æ–≤—ñ—Å—Ç—å", "correct_word": "Conscience" }, { "prompt": "–£–≤–∞–∂–Ω—ñ—Å—Ç—å", "correct_word": "Mindfulness" }, { "prompt": "–ó–∞—Ö–∏—Å—Ç", "correct_word": "Protection" }, { "prompt": "–¢–∏—Å–∫", "correct_word": "Pressure" }, { "prompt": "–ü—Ä–∏–±—É—Ç–æ–∫", "correct_word": "Profit" },
            { "prompt": "–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å", "correct_word": "Reliability" }, { "prompt": "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞", "correct_word": "Verification" }, { "prompt": "–ú–µ—Ç–∞", "correct_word": "Purpose" }, { "prompt": "–Ø–∫—ñ—Å—Ç—å", "correct_word": "Quality" }, { "prompt": "–ö—ñ–ª—å–∫—ñ—Å—Ç—å", "correct_word": "Quantity" }, { "prompt": "–°—Ç–æ—Ä–æ–Ω–Ω—ñ–π –µ—Ñ–µ–∫—Ç", "correct_word": "Side effect" }
          ]
        }
      ]
    },
    {
      "level_id": 7,
      "title": "Level 7: Interaction & Science",
      "words": [
        { "id": "w73", "word": "Relationship", "translation": "–°—Ç–æ—Å—É–Ω–∫–∏", "definition": "The way in which two things are connected or two people feel/behave towards each other." },
        { "id": "w74", "word": "Research", "translation": "–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è", "definition": "A detailed study of a subject, especially in order to discover (new) information." },
        { "id": "w75", "word": "Contradiction", "translation": "–°—É–ø–µ—Ä–µ—á–Ω—ñ—Å—Ç—å", "definition": "The fact of something being the complete opposite of something else." },
        { "id": "w76", "word": "Emotion", "translation": "–ï–º–æ—Ü—ñ—è", "definition": "A strong feeling such as love or anger, or strong feelings in general." },
        { "id": "w77", "word": "Disagreement", "translation": "–ù–µ–∑–≥–æ–¥–∞, —Å—É–ø–µ—Ä–µ—á–∫–∞", "definition": "An argument or a situation in which people do not have the same opinion." },
        { "id": "w78", "word": "Misunderstanding", "translation": "–ù–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è", "definition": "An occasion when someone does not understand something correctly." },
        { "id": "w79", "word": "Negotiation", "translation": "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∏", "definition": "The process of discussing something with someone in order to reach an agreement." },
        { "id": "w80", "word": "Addiction", "translation": "–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å", "definition": "An inability to stop doing or using something, especially something harmful." },
        { "id": "w81", "word": "Amateur", "translation": "–õ—é–±–∏—Ç–µ–ª—å", "definition": "A person who takes part in an activity for pleasure, not as a job." },
        { "id": "w82", "word": "Schedule", "translation": "–†–æ–∑–∫–ª–∞–¥", "definition": "A list of planned activities or things to be done showing the times or dates." },
        { "id": "w83", "word": "Science", "translation": "–ù–∞—É–∫–∞", "definition": "The systematic study of the structure and behaviour of the physical and natural world." },
        { "id": "w84", "word": "Confidence", "translation": "–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å, –¥–æ–≤—ñ—Ä–∞", "definition": "The quality of being certain of your abilities or having trust in people, plans, or the future." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w73", "definition_ref": "w73" }, { "word_id": "w74", "definition_ref": "w74" }, { "word_id": "w75", "definition_ref": "w75" }, { "word_id": "w76", "definition_ref": "w76" }, { "word_id": "w77", "definition_ref": "w77" }, { "word_id": "w78", "definition_ref": "w78" },
            { "word_id": "w79", "definition_ref": "w79" }, { "word_id": "w80", "definition_ref": "w80" }, { "word_id": "w81", "definition_ref": "w81" }, { "word_id": "w82", "definition_ref": "w82" }, { "word_id": "w83", "definition_ref": "w83" }, { "word_id": "w84", "definition_ref": "w84" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "A strong _____ is built on trust and respect.", "correct_word_id": "w73", "distractors": ["Research", "Contradiction", "Schedule"] },
            { "question": "Scientists are doing _____ on the new virus.", "correct_word_id": "w74", "distractors": ["Research", "Addiction", "Emotion"] },
            { "question": "There is a _____ between what he says and what he does.", "correct_word_id": "w75", "distractors": ["Contradiction", "Negotiation", "Science"] },
            { "question": "We had a slight _____ about where to eat dinner.", "correct_word_id": "w77", "distractors": ["Disagreement", "Confidence", "Amateur"] },
            { "question": "It was just a _____; I didn't mean to offend you.", "correct_word_id": "w78", "distractors": ["Misunderstanding", "Schedule", "Research"] },
            { "question": "The peace _____ took three days to complete.", "correct_word_id": "w79", "distractors": ["Negotiation", "Addiction", "Relationship"] },
            { "question": "He fought his drug _____ for years.", "correct_word_id": "w80", "distractors": ["Addiction", "Amateur", "Science"] },
            { "question": "Check the train _____ before you leave.", "correct_word_id": "w82", "distractors": ["Schedule", "Emotion", "Confidence"] },
            { "question": "You need _____ to speak in public.", "correct_word_id": "w84", "distractors": ["Confidence", "Contradiction", "Misunderstanding"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "The business {{w79}} between the two companies was difficult due to a {{w78}}. One side wanted to focus on {{w83}} and {{w74}}, while the other worried about the production {{w82}}. There was a clear {{w75}} in their goals. This caused a lot of negative {{w76}} and {{w77}}. However, the manager had {{w84}} that they could solve it. They avoided acting like an {{w81}} and built a better business {{w73}}.",
          "word_bank": ["w73", "w74", "w75", "w76", "w77", "w78", "w79", "w81", "w82", "w83", "w84"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–°—Ç–æ—Å—É–Ω–∫–∏", "correct_word": "Relationship" }, { "prompt": "–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è", "correct_word": "Research" }, { "prompt": "–°—É–ø–µ—Ä–µ—á–Ω—ñ—Å—Ç—å", "correct_word": "Contradiction" }, { "prompt": "–ï–º–æ—Ü—ñ—è", "correct_word": "Emotion" }, { "prompt": "–ù–µ–∑–≥–æ–¥–∞, —Å—É–ø–µ—Ä–µ—á–∫–∞", "correct_word": "Disagreement" }, { "prompt": "–ù–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è", "correct_word": "Misunderstanding" },
            { "prompt": "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∏", "correct_word": "Negotiation" }, { "prompt": "–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å", "correct_word": "Addiction" }, { "prompt": "–õ—é–±–∏—Ç–µ–ª—å", "correct_word": "Amateur" }, { "prompt": "–†–æ–∑–∫–ª–∞–¥", "correct_word": "Schedule" }, { "prompt": "–ù–∞—É–∫–∞", "correct_word": "Science" }, { "prompt": "–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å, –¥–æ–≤—ñ—Ä–∞", "correct_word": "Confidence" }
          ]
        }
      ]
    },
    {
      "level_id": 8,
      "title": "Level 8: Society & Justice",
      "words": [
        { "id": "w85", "word": "Craving", "translation": "–ü–∞–ª–∫–µ –±–∞–∂–∞–Ω–Ω—è, –∂–∞–¥–æ–±–∞", "definition": "A strong or uncontrollable desire." },
        { "id": "w86", "word": "District", "translation": "–†–∞–π–æ–Ω", "definition": "An area of a country or town that has fixed borders." },
        { "id": "w87", "word": "Honesty", "translation": "–ß–µ—Å–Ω—ñ—Å—Ç—å", "definition": "The quality of being honest (telling the truth)." },
        { "id": "w88", "word": "Security", "translation": "–ë–µ–∑–ø–µ–∫–∞", "definition": "Protection of a person, building, organization, or country against threats." },
        { "id": "w89", "word": "Kindness", "translation": "–î–æ–±—Ä–æ—Ç–∞", "definition": "The quality of being kind." },
        { "id": "w90", "word": "Justice", "translation": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å", "definition": "Fairness in the way people are dealt with." },
        { "id": "w91", "word": "Disgust", "translation": "–í—ñ–¥—Ä–∞–∑–∞, —Ä–æ–∑–¥—Ä–∞—Ç—É–≤–∞–Ω–Ω—è", "definition": "A strong feeling of disapproval and dislike at a situation/person/thing." },
        { "id": "w92", "word": "Suggestion", "translation": "–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è, —ñ–¥–µ—è", "definition": "An idea, plan, or action that is suggested or the act of suggesting it." },
        { "id": "w93", "word": "Solution", "translation": "–†—ñ—à–µ–Ω–Ω—è", "definition": "The answer to a problem." },
        { "id": "w94", "word": "Society", "translation": "–°—É—Å–ø—ñ–ª—å—Å—Ç–≤–æ", "definition": "A large group of people who live together in an organized way." },
        { "id": "w95", "word": "Adherence", "translation": "–î–æ—Ç—Ä–∏–º–∞–Ω–Ω—è, –ø—Ä–∏—Ö–∏–ª—å–Ω—ñ—Å—Ç—å", "definition": "The fact of someone behaving exactly according to rules, beliefs, etc." },
        { "id": "w96", "word": "Devotion", "translation": "–í—ñ–¥–¥–∞–Ω—ñ—Å—Ç—å", "definition": "Loyalty and love or care for someone or something." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w85", "definition_ref": "w85" }, { "word_id": "w86", "definition_ref": "w86" }, { "word_id": "w87", "definition_ref": "w87" }, { "word_id": "w88", "definition_ref": "w88" }, { "word_id": "w89", "definition_ref": "w89" }, { "word_id": "w90", "definition_ref": "w90" },
            { "word_id": "w91", "definition_ref": "w91" }, { "word_id": "w92", "definition_ref": "w92" }, { "word_id": "w93", "definition_ref": "w93" }, { "word_id": "w94", "definition_ref": "w94" }, { "word_id": "w95", "definition_ref": "w95" }, { "word_id": "w96", "definition_ref": "w96" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "I have a sudden _____ for chocolate.", "correct_word_id": "w85", "distractors": ["Craving", "District", "Solution"] },
            { "question": "This _____ is known for its nightlife.", "correct_word_id": "w86", "distractors": ["District", "Society", "Security"] },
            { "question": "Airport _____ checked our bags carefully.", "correct_word_id": "w88", "distractors": ["Security", "Honesty", "Suggestion"] },
            { "question": "They demanded _____ for the victim of the crime.", "correct_word_id": "w90", "distractors": ["Justice", "Disgust", "Craving"] },
            { "question": "He looked at the rotten food with _____.", "correct_word_id": "w91", "distractors": ["Disgust", "Kindness", "Devotion"] },
            { "question": "Do you have any _____ for where to go?", "correct_word_id": "w92", "distractors": ["Suggestion", "Solution", "Adherence"] },
            { "question": "We need to find a _____ to this problem.", "correct_word_id": "w93", "distractors": ["Solution", "Society", "Craving"] },
            { "question": "Strict _____ to the safety rules is required.", "correct_word_id": "w95", "distractors": ["Adherence", "Honesty", "District"] },
            { "question": "Her _____ to her family is admirable.", "correct_word_id": "w96", "distractors": ["Devotion", "Security", "Disgust"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "In our {{w86}}, crime was a problem, so {{w88}} was increased. The {{w94}} demanded {{w90}} and {{w87}} from the police. One officer showed great {{w96}} to his job. He had a {{w92}}: treat people with {{w89}} instead of force. His {{w93}} worked perfectly. The strict {{w95}} to this new plan reduced crime, and the people's {{w91}} with the old system disappeared.",
          "word_bank": ["w86", "w87", "w88", "w89", "w90", "w91", "w92", "w93", "w94", "w95", "w96"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–ü–∞–ª–∫–µ –±–∞–∂–∞–Ω–Ω—è", "correct_word": "Craving" }, { "prompt": "–†–∞–π–æ–Ω", "correct_word": "District" }, { "prompt": "–ß–µ—Å–Ω—ñ—Å—Ç—å", "correct_word": "Honesty" }, { "prompt": "–ë–µ–∑–ø–µ–∫–∞", "correct_word": "Security" }, { "prompt": "–î–æ–±—Ä–æ—Ç–∞", "correct_word": "Kindness" }, { "prompt": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å", "correct_word": "Justice" },
            { "prompt": "–í—ñ–¥—Ä–∞–∑–∞", "correct_word": "Disgust" }, { "prompt": "–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è", "correct_word": "Suggestion" }, { "prompt": "–†—ñ—à–µ–Ω–Ω—è (–ø—Ä–æ–±–ª–µ–º–∏)", "correct_word": "Solution" }, { "prompt": "–°—É—Å–ø—ñ–ª—å—Å—Ç–≤–æ", "correct_word": "Society" }, { "prompt": "–î–æ—Ç—Ä–∏–º–∞–Ω–Ω—è", "correct_word": "Adherence" }, { "prompt": "–í—ñ–¥–¥–∞–Ω—ñ—Å—Ç—å", "correct_word": "Devotion" }
          ]
        }
      ]
    },
    {
      "level_id": 9,
      "title": "Level 9: Action & Character",
      "words": [
        { "id": "w97", "word": "Trust", "translation": "–î–æ–≤—ñ—Ä–∞", "definition": "The belief that you can trust someone or something." },
        { "id": "w98", "word": "Waste", "translation": "–í—ñ–¥—Ö–æ–¥–∏", "definition": "Unwanted matter or material of any type, often that which is left after useful substances have been removed." },
        { "id": "w99", "word": "Advertisement", "translation": "–†–µ–∫–ª–∞–º–∞", "definition": "A picture, short film, song, etc. that tries to persuade people to buy a product or service." },
        { "id": "w100", "word": "Rebel", "translation": "–ë—É–Ω—Ç–∞—Ä", "definition": "A person who is opposed to the political system in their country and tries to change it." },
        { "id": "w101", "word": "Charity", "translation": "–ë–ª–∞–≥–æ–¥—ñ–π–Ω—ñ—Å—Ç—å", "definition": "A system of giving money, food, or help free to those who are in need." },
        { "id": "w102", "word": "Complaint", "translation": "–°–∫–∞—Ä–≥–∞", "definition": "A statement that something is wrong or not satisfactory." },
        { "id": "w103", "word": "Willpower", "translation": "–°–∏–ª–∞ –≤–æ–ª—ñ", "definition": "The ability to control your own thoughts and the way in which you behave." },
        { "id": "w104", "word": "Inequality", "translation": "–ù–µ—Ä—ñ–≤–Ω—ñ—Å—Ç—å", "definition": "The unfair situation in society when some people have more money, opportunities, etc. than others." },
        { "id": "w105", "word": "Violence", "translation": "–ù–∞—Å–∏–ª—å—Å—Ç–≤–æ, –∂–æ—Ä—Å—Ç–æ–∫—ñ—Å—Ç—å", "definition": "Actions or words that are intended to hurt people." },
        { "id": "w106", "word": "Courage", "translation": "–°–º—ñ–ª–∏–≤—ñ—Å—Ç—å", "definition": "The ability to control your fear in a dangerous or difficult situation." },
        { "id": "w107", "word": "Discovery", "translation": "–í—ñ–¥–∫—Ä–∏—Ç—Ç—è", "definition": "The process of finding information, a place, or an object, especially for the first time." },
        { "id": "w108", "word": "Compassion", "translation": "–°–ø—ñ–≤—á—É—Ç—Ç—è", "definition": "A strong feeling of sympathy and sadness for the suffering or bad luck of others." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w97", "definition_ref": "w97" }, { "word_id": "w98", "definition_ref": "w98" }, { "word_id": "w99", "definition_ref": "w99" }, { "word_id": "w100", "definition_ref": "w100" }, { "word_id": "w101", "definition_ref": "w101" }, { "word_id": "w102", "definition_ref": "w102" },
            { "word_id": "w103", "definition_ref": "w103" }, { "word_id": "w104", "definition_ref": "w104" }, { "word_id": "w105", "definition_ref": "w105" }, { "word_id": "w106", "definition_ref": "w106" }, { "word_id": "w107", "definition_ref": "w107" }, { "word_id": "w108", "definition_ref": "w108" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "It takes time to build _____ with a new friend.", "correct_word_id": "w97", "distractors": ["Trust", "Waste", "Rebel"] },
            { "question": "Please put the toxic _____ in the special bin.", "correct_word_id": "w98", "distractors": ["Waste", "Advertisement", "Courage"] },
            { "question": "I saw an _____ for a new phone on TV.", "correct_word_id": "w99", "distractors": ["Advertisement", "Complaint", "Violence"] },
            { "question": "He was a _____ who fought against the unjust laws.", "correct_word_id": "w100", "distractors": ["Rebel", "Charity", "Discovery"] },
            { "question": "She gives money to _____ every month.", "correct_word_id": "w101", "distractors": ["Charity", "Inequality", "Trust"] },
            { "question": "I want to make a _____ about the bad service.", "correct_word_id": "w102", "distractors": ["Complaint", "Compassion", "Willpower"] },
            { "question": "It takes strong _____ to quit smoking.", "correct_word_id": "w103", "distractors": ["Willpower", "Inequality", "Waste"] },
            { "question": "We must fight against social _____.", "correct_word_id": "w104", "distractors": ["Inequality", "Advertisement", "Trust"] },
            { "question": "It took _____ to jump from the plane.", "correct_word_id": "w106", "distractors": ["Courage", "Violence", "Discovery"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "The young {{w100}} fought against {{w104}} and {{w105}}. He had the {{w106}} to speak out. He started a {{w101}} to help the poor and showed deep {{w108}}. He made a public {{w102}} about the toxic {{w98}} in the river. His {{w103}} inspired others. An {{w99}} for his cause appeared on TV, helping the {{w107}} of new supporters and building public {{w97}}.",
          "word_bank": ["w97", "w98", "w99", "w100", "w101", "w102", "w103", "w104", "w105", "w106", "w107", "w108"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–î–æ–≤—ñ—Ä–∞", "correct_word": "Trust" }, { "prompt": "–í—ñ–¥—Ö–æ–¥–∏", "correct_word": "Waste" }, { "prompt": "–†–µ–∫–ª–∞–º–∞", "correct_word": "Advertisement" }, { "prompt": "–ë—É–Ω—Ç–∞—Ä", "correct_word": "Rebel" }, { "prompt": "–ë–ª–∞–≥–æ–¥—ñ–π–Ω—ñ—Å—Ç—å", "correct_word": "Charity" }, { "prompt": "–°–∫–∞—Ä–≥–∞", "correct_word": "Complaint" },
            { "prompt": "–°–∏–ª–∞ –≤–æ–ª—ñ", "correct_word": "Willpower" }, { "prompt": "–ù–µ—Ä—ñ–≤–Ω—ñ—Å—Ç—å", "correct_word": "Inequality" }, { "prompt": "–ù–∞—Å–∏–ª—å—Å—Ç–≤–æ", "correct_word": "Violence" }, { "prompt": "–°–º—ñ–ª–∏–≤—ñ—Å—Ç—å", "correct_word": "Courage" }, { "prompt": "–í—ñ–¥–∫—Ä–∏—Ç—Ç—è", "correct_word": "Discovery" }, { "prompt": "–°–ø—ñ–≤—á—É—Ç—Ç—è", "correct_word": "Compassion" }
          ]
        }
      ]
    },
    {
      "level_id": 10,
      "title": "Level 10: Life & Work",
      "words": [
        { "id": "w109", "word": "Patience", "translation": "–°—Ç—Ä–∏–º–∞–Ω—ñ—Å—Ç—å", "definition": "The ability to control your feelings and not behave in an angry way." },
        { "id": "w110", "word": "Disease", "translation": "–•–≤–æ—Ä–æ–±–∞", "definition": "Illness of people, animals, plants, etc., caused by infection or a failure of health." },
        { "id": "w111", "word": "Earthquake", "translation": "–ó–µ–º–ª–µ—Ç—Ä—É—Å", "definition": "A sudden violent movement of the earth's surface, sometimes causing great damage." },
        { "id": "w112", "word": "Election", "translation": "–í–∏–±–æ—Ä–∏", "definition": "A time when people vote in order to choose someone for a political or official job." },
        { "id": "w113", "word": "Youth", "translation": "–ú–æ–ª–æ–¥—å", "definition": "The period of your life when you are young, or young people considered as a group." },
        { "id": "w114", "word": "Adolescence", "translation": "–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∏–π –≤—ñ–∫", "definition": "The period of time in a person's life when they are developing into an adult." },
        { "id": "w115", "word": "Employee", "translation": "–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫", "definition": "Someone who is paid to work for someone else." },
        { "id": "w116", "word": "Employer", "translation": "–†–æ–±–æ—Ç–æ–¥–∞–≤–µ—Ü—å", "definition": "A person or organization that employs people." },
        { "id": "w117", "word": "Equipment", "translation": "–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è", "definition": "The set of necessary tools, clothing, etc. for a particular purpose." },
        { "id": "w118", "word": "Expectation", "translation": "–û—á—ñ–∫—É–≤–∞–Ω–Ω—è", "definition": "The feeling that good things are going to happen in the future." }
      ],
      "tasks": [
        {
          "type": "match_definitions",
          "instruction": "Match ALL words with their definitions.",
          "items": [
            { "word_id": "w109", "definition_ref": "w109" }, { "word_id": "w110", "definition_ref": "w110" }, { "word_id": "w111", "definition_ref": "w111" }, { "word_id": "w112", "definition_ref": "w112" }, { "word_id": "w113", "definition_ref": "w113" },
            { "word_id": "w114", "definition_ref": "w114" }, { "word_id": "w115", "definition_ref": "w115" }, { "word_id": "w116", "definition_ref": "w116" }, { "word_id": "w117", "definition_ref": "w117" }, { "word_id": "w118", "definition_ref": "w118" }
          ]
        },
        {
          "type": "sentence_gap_fill",
          "instruction": "Choose the correct word.",
          "items": [
            { "question": "Lose your temper? No, keep your _____.", "correct_word_id": "w109", "distractors": ["Patience", "Disease", "Election"] },
            { "question": "Malaria is a dangerous _____.", "correct_word_id": "w110", "distractors": ["Disease", "Earthquake", "Youth"] },
            { "question": "The _____ destroyed many buildings in the city.", "correct_word_id": "w111", "distractors": ["Earthquake", "Equipment", "Employer"] },
            { "question": "Who will win the next presidential _____?", "correct_word_id": "w112", "distractors": ["Election", "Expectation", "Adolescence"] },
            { "question": "Enjoy your _____ while you have energy.", "correct_word_id": "w113", "distractors": ["Youth", "Employee", "Disease"] },
            { "question": "_____ is a difficult time for many teenagers.", "correct_word_id": "w114", "distractors": ["Adolescence", "Employer", "Equipment"] },
            { "question": "The _____ asked his boss for a raise.", "correct_word_id": "w115", "distractors": ["Employee", "Employer", "Youth"] },
            { "question": "A good _____ cares about their staff.", "correct_word_id": "w116", "distractors": ["Employer", "Employee", "Patience"] },
            { "question": "The gym has new exercise _____.", "correct_word_id": "w117", "distractors": ["Equipment", "Election", "Disease"] },
            { "question": "The movie didn't meet my high _____.", "correct_word_id": "w118", "distractors": ["Expectation", "Earthquake", "Patience"] }
          ]
        },
        {
          "type": "story_gap_fill",
          "instruction": "Fill in the gaps.",
          "text_template": "During his {{w114}}, Tom lived through a terrible {{w111}}. This experience changed his {{w118}} of life. In his {{w113}}, he decided to fight {{w110}} and become a doctor. Now, as an {{w115}} at a hospital, he works hard. His {{w116}} respects him. He uses modern {{w117}} to treat patients. He handles stress with great {{w109}}. He plans to run in the local {{w112}} to improve hospital funding.",
          "word_bank": ["w109", "w110", "w111", "w112", "w113", "w114", "w115", "w116", "w117", "w118"]
        },
        {
          "type": "manual_input",
          "instruction": "Translate ALL words.",
          "items": [
            { "prompt": "–°—Ç—Ä–∏–º–∞–Ω—ñ—Å—Ç—å", "correct_word": "Patience" }, { "prompt": "–•–≤–æ—Ä–æ–±–∞", "correct_word": "Disease" }, { "prompt": "–ó–µ–º–ª–µ—Ç—Ä—É—Å", "correct_word": "Earthquake" }, { "prompt": "–í–∏–±–æ—Ä–∏", "correct_word": "Election" }, { "prompt": "–ú–æ–ª–æ–¥—å", "correct_word": "Youth" },
            { "prompt": "–ü—ñ–¥–ª—ñ—Ç–∫–æ–≤–∏–π –≤—ñ–∫", "correct_word": "Adolescence" }, { "prompt": "–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫", "correct_word": "Employee" }, { "prompt": "–†–æ–±–æ—Ç–æ–¥–∞–≤–µ—Ü—å", "correct_word": "Employer" }, { "prompt": "–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è", "correct_word": "Equipment" }, { "prompt": "–û—á—ñ–∫—É–≤–∞–Ω–Ω—è", "correct_word": "Expectation" }
          ]
        }
      ]
    }
  ]
};

// --- APP LOGIC ---
const app = {
    state: {
        currentLevelIndex: 0,
        currentTaskIndex: 0,
        score: 0,
        subTaskIndex: 0, // For tasks with multiple items (sentence gap fill)
        userAnswers: {}, // Store logic for matching/story
        currentLevelData: null
    },

    init: function() {
        this.renderLevels();
    },

    // Navigation
    showScreen: function(screenId) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
        const homeBtn = document.getElementById('home-btn');
        if(screenId === 'start-screen') homeBtn.style.display = 'none';
        else homeBtn.style.display = 'block';
    },

    showLevels: function() {
        this.renderLevels();
        this.showScreen('levels-screen');
    },

    // Render Levels Grid
    renderLevels: function() {
        const container = document.getElementById('levels-container');
        container.innerHTML = '';
        
        // Populate levels from Data
        courseData.levels.forEach((level, index) => {
            const card = document.createElement('div');
            card.className = 'glass-panel level-card';
            
            const startWord = (index * 12) + 1;
            const endWord = startWord + level.words.length - 1;

            card.innerHTML = `
                <div class="level-num">${level.level_id}</div>
                <div class="level-info">
                    <div class="level-range">WORDS ${startWord} - ${endWord}</div>
                    <h3>${level.title}</h3>
                    <div class="level-stats">
                        <span>üìù ${level.words.length} Words</span>
                        <span>üéØ ${level.tasks.length} Missions</span>
                    </div>
                </div>
            `;
            card.onclick = () => this.startLevel(index);
            container.appendChild(card);
        });
    },

    startLevel: function(index) {
        this.state.currentLevelIndex = index;
        this.state.currentLevelData = courseData.levels[index];
        this.renderIntro();
        this.showScreen('intro-screen');
    },

    renderIntro: function() {
        const level = this.state.currentLevelData;
        document.getElementById('intro-title').textContent = level.title;
        const list = document.getElementById('intro-list');
        list.innerHTML = '';
        level.words.forEach(w => {
            const item = document.createElement('div');
            item.className = 'word-item';
            item.innerHTML = `
                <span class="en-word">${w.word}</span>
                <span class="ua-word">${w.translation}</span>
            `;
            list.appendChild(item);
        });
    },

    startTasks: function() {
        this.state.currentTaskIndex = 0;
        this.state.subTaskIndex = 0;
        this.loadTask();
        this.showScreen('task-screen');
    },

    // --- TASK ENGINE ---
    loadTask: function() {
        const level = this.state.currentLevelData;
        
        // Check if level complete
        if (this.state.currentTaskIndex >= level.tasks.length) {
            this.showScreen('result-screen');
            return;
        }

        const task = level.tasks[this.state.currentTaskIndex];
        
        // Reset UI
        document.getElementById('task-counter').textContent = `${this.state.currentTaskIndex + 1}/${level.tasks.length}`;
        document.getElementById('progress-fill').style.width = `${((this.state.currentTaskIndex) / level.tasks.length) * 100}%`;
        document.getElementById('task-type-label').textContent = task.type.replace(/_/g, ' ');
        document.getElementById('task-instruction').textContent = task.instruction;
        document.getElementById('check-btn').style.display = 'block';
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('feedback-box').className = 'feedback-area';
        document.getElementById('feedback-box').style.display = 'none';

        const content = document.getElementById('task-content');
        content.innerHTML = '';

        // Dispatch Renderer
        if (task.type === 'match_definitions') this.renderMatchTask(task, content);
        else if (task.type === 'sentence_gap_fill') this.renderSentenceTask(task, content);
        else if (task.type === 'story_gap_fill') this.renderStoryTask(task, content);
        else if (task.type === 'manual_input') this.renderInputTask(task, content);
    },

    // 1. Matching Task (IMMEDIATE FEEDBACK MODE)
    renderMatchTask: function(task, container) {
        // Hide global check button for this interactive mode
        document.getElementById('check-btn').style.display = 'none';

        const wrapper = document.createElement('div');
        wrapper.className = 'match-container';
        
        const leftCol = document.createElement('div');
        leftCol.className = 'match-col';
        const rightCol = document.createElement('div');
        rightCol.className = 'match-col';

        const words = task.items.map(item => this.getWordById(item.word_id));
        const defs = task.items.map(item => ({id: item.definition_ref, text: this.getWordById(item.definition_ref).definition}));

        // Shuffle Definitions
        const shuffledDefs = [...defs].sort(() => Math.random() - 0.5);

        words.forEach(w => {
            const el = document.createElement('div');
            el.className = 'glass-panel match-item match-left';
            el.textContent = w.word;
            el.dataset.id = w.id;
            el.onclick = () => this.handleMatchClick(el, 'left');
            leftCol.appendChild(el);
        });

        shuffledDefs.forEach(d => {
            const el = document.createElement('div');
            el.className = 'glass-panel match-item match-right';
            el.textContent = d.text;
            el.dataset.id = d.id;
            el.onclick = () => this.handleMatchClick(el, 'right');
            rightCol.appendChild(el);
        });

        wrapper.appendChild(leftCol);
        wrapper.appendChild(rightCol);
        container.appendChild(wrapper);
    },

    handleMatchClick: function(el, side) {
        if (el.classList.contains('correct') || el.classList.contains('wrong')) return;

        const sameSideSelector = side === 'left' ? '.match-left' : '.match-right';
        document.querySelectorAll(sameSideSelector).forEach(e => e.classList.remove('selected'));
        el.classList.add('selected');

        const otherSideSelector = side === 'left' ? '.match-right.selected' : '.match-left.selected';
        const otherEl = document.querySelector(otherSideSelector);

        if (otherEl) {
            this.checkImmediatePair(el, otherEl);
        }
    },

    checkImmediatePair: function(el1, el2) {
        const id1 = el1.dataset.id;
        const id2 = el2.dataset.id;
        const isCorrect = (id1 === id2);

        el1.classList.remove('selected');
        el2.classList.remove('selected');

        if (isCorrect) {
            el1.classList.add('correct');
            el2.classList.add('correct');
            
            const total = document.querySelectorAll('.match-left').length;
            const correctCount = document.querySelectorAll('.match-left.correct').length;
            
            if (total === correctCount) {
                const fb = document.getElementById('feedback-box');
                fb.textContent = "Perfect match!";
                fb.className = 'feedback-area success';
                fb.style.display = 'block';
                document.getElementById('next-btn').style.display = 'block';
            }
        } else {
            el1.classList.add('wrong');
            el2.classList.add('wrong');
            
            setTimeout(() => {
                el1.classList.remove('wrong');
                el2.classList.remove('wrong');
            }, 1000);
        }
    },

    // 2. Sentence Gap Fill
    renderSentenceTask: function(task, container) {
        if (!this.state.subTaskIndex) this.state.subTaskIndex = 0;
        
        const item = task.items[this.state.subTaskIndex];
        
        const card = document.createElement('div');
        card.className = 'glass-panel question-card';
        
        const questionText = document.createElement('div');
        questionText.style.fontSize = "1.3rem";
        questionText.style.marginBottom = "25px";
        questionText.style.fontWeight = "500";
        this.createInteractiveText(item.question, questionText);
        
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'options-grid';
        
        const options = [...item.distractors, this.getWordById(item.correct_word_id).word].sort(() => Math.random() - 0.5);
        
        this.state.userAnswers.currentSelection = null;

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = opt;
            btn.onclick = () => {
                document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                this.state.userAnswers.currentSelection = opt;
            };
            optionsDiv.appendChild(btn);
        });

        card.appendChild(questionText);
        card.appendChild(optionsDiv);
        container.appendChild(card);
        
        document.getElementById('task-counter').textContent = `${this.state.currentTaskIndex + 1} (${this.state.subTaskIndex + 1}/${task.items.length})`;
    },

    // 3. Story Gap Fill
    renderStoryTask: function(task, container) {
        const textWrapper = document.createElement('div');
        textWrapper.className = 'glass-panel story-text';
        textWrapper.style.padding = '30px';
        
        let html = '';
        const parts = task.text_template.split(/({{\w+}})/g);
        
        this.state.userAnswers.storySlots = [];

        parts.forEach((part, idx) => {
            if (part.match(/^{{\w+}}$/)) {
                const wordId = part.replace(/[{}]/g, '');
                html += `<span class="gap-slot" data-correct="${wordId}" data-index="${idx}" onclick="app.fillGap(this)">______</span>`;
                this.state.userAnswers.storySlots.push({ id: wordId, filled: null, elementIndex: idx });
            } else {
                html += this.processTextForTranslation(part);
            }
        });

        textWrapper.innerHTML = html;
        this.attachTranslationListeners(textWrapper); 

        const bank = document.createElement('div');
        bank.className = 'word-bank';
        task.word_bank.forEach(wid => {
            const w = this.getWordById(wid);
            const chip = document.createElement('div');
            chip.className = 'bank-item';
            chip.textContent = w.word;
            chip.dataset.id = wid;
            chip.onclick = () => this.selectBankWord(chip);
            bank.appendChild(chip);
        });

        container.appendChild(textWrapper);
        container.appendChild(bank);

        this.state.userAnswers.selectedBankWord = null;
    },

    processTextForTranslation: function(text) {
        return text.split(' ').map(w => {
            if(!w.trim()) return w;
            return `<span class="interactive-word" data-word="${w.replace(/[^\w]/g, '')}">${w} </span>`;
        }).join('');
    },

    selectBankWord: function(el) {
        if (el.classList.contains('used')) return;
        
        document.querySelectorAll('.bank-item').forEach(b => b.classList.remove('selected'));
        el.classList.add('selected');
        this.state.userAnswers.selectedBankWord = { id: el.dataset.id, word: el.textContent, element: el };
    },

    fillGap: function(slotEl) {
        if (slotEl.classList.contains('filled')) {
            const filledId = slotEl.dataset.filledId;
            if (filledId) {
                const bankItem = document.querySelector(`.bank-item[data-id="${filledId}"]`);
                if (bankItem) {
                    bankItem.classList.remove('used');
                }
            }
            slotEl.textContent = '______';
            slotEl.classList.remove('filled', 'correct', 'wrong'); 
            delete slotEl.dataset.filledId;
            
            document.getElementById('feedback-box').style.display = 'none';
            document.getElementById('check-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'none';
            return; 
        }

        const selection = this.state.userAnswers.selectedBankWord;
        if (!selection) return;

        slotEl.textContent = selection.word;
        slotEl.classList.add('filled');
        slotEl.dataset.filledId = selection.id; 

        selection.element.classList.add('used');
        selection.element.classList.remove('selected');
        
        this.state.userAnswers.selectedBankWord = null;
        document.getElementById('feedback-box').style.display = 'none';
    },

    // 4. Manual Input
    renderInputTask: function(task, container) {
        const item = task.items[this.state.subTaskIndex || 0];
        if (!this.state.subTaskIndex) this.state.subTaskIndex = 0;

        const wrapper = document.createElement('div');
        wrapper.className = 'glass-panel input-group';
        
        const label = document.createElement('h3');
        label.textContent = `Translate: "${item.prompt}"`;
        label.style.marginBottom = "0";
        label.style.fontSize = "1.4rem";
        
        const input = document.createElement('input');
        input.type = 'text';
        input.className = 'manual-input';
        input.placeholder = 'Type English word...';
        input.id = 'current-input';
        input.autocomplete = "off";

        wrapper.appendChild(label);
        wrapper.appendChild(input);
        container.appendChild(wrapper);

        document.getElementById('task-counter').textContent = `${this.state.currentTaskIndex + 1} (${this.state.subTaskIndex + 1}/${task.items.length})`;
        
        setTimeout(() => input.focus(), 100);
    },

    // --- CHECK LOGIC ---
    checkAnswer: function() {
        const task = this.state.currentLevelData.tasks[this.state.currentTaskIndex];
        let correct = false;
        let message = "";

        if (task.type === 'match_definitions') {
             return;

        } else if (task.type === 'sentence_gap_fill') {
            const item = task.items[this.state.subTaskIndex];
            const correctWord = this.getWordById(item.correct_word_id).word;
            const selected = this.state.userAnswers.currentSelection;
            
            if (!selected) {
                const fb = document.getElementById('feedback-box');
                fb.textContent = "Please select an option first.";
                fb.className = 'feedback-area error';
                fb.style.display = 'block';
                return;
            }

            const selectedBtn = document.querySelector('.option-btn.selected'); 

            if (selected === correctWord) {
                correct = true;
                if(selectedBtn) selectedBtn.classList.add('correct');
                message = "Correct!";
            } else {
                if(selectedBtn) selectedBtn.classList.add('wrong');
                message = `Wrong. Correct answer: ${correctWord}`;
            }

        } else if (task.type === 'story_gap_fill') {
            let errors = 0;
            let empty = 0;
            document.querySelectorAll('.gap-slot').forEach(slot => {
                const correctId = slot.dataset.correct;
                const filledId = slot.dataset.filledId;
                
                if (!filledId) {
                    empty++;
                    return;
                }

                if (correctId === filledId) {
                    slot.classList.add('correct');
                    slot.classList.remove('wrong');
                } else {
                    slot.classList.add('wrong');
                    slot.classList.remove('correct');
                    errors++;
                }
            });
            
            if (empty > 0) {
                message = "Please fill all gaps first.";
                document.getElementById('feedback-box').textContent = message;
                document.getElementById('feedback-box').className = 'feedback-area error';
                document.getElementById('feedback-box').style.display = 'block';
                return;
            }

            correct = (errors === 0);
            message = correct ? "Great reading! Perfect score." : "You have some errors. Tap red words to retry.";

        } else if (task.type === 'manual_input') {
            const item = task.items[this.state.subTaskIndex];
            const val = document.getElementById('current-input').value.trim();
            
            if (!val) {
                 return;
            }

            if (val.toLowerCase() === item.correct_word.toLowerCase()) {
                correct = true;
                document.getElementById('current-input').style.borderColor = 'var(--success)';
                message = "Correct spelling!";
            } else {
                document.getElementById('current-input').style.borderColor = 'var(--error)';
                message = `Incorrect. Correct: ${item.correct_word}`;
            }
        }

        const fb = document.getElementById('feedback-box');
        fb.textContent = message;
        fb.className = `feedback-area ${correct ? 'success' : 'error'}`;
        fb.style.display = 'block';

        if (correct) {
            document.getElementById('check-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'block';
        }
    },

    nextTask: function() {
        const task = this.state.currentLevelData.tasks[this.state.currentTaskIndex];
        
        if (task.items && (task.type === 'sentence_gap_fill' || task.type === 'manual_input')) {
            this.state.subTaskIndex++;
            if (this.state.subTaskIndex < task.items.length) {
                this.loadTask(); 
                return;
            }
        }

        this.state.currentTaskIndex++;
        this.loadTask();
    },

    // --- UTILS ---
    getWordById: function(id) {
        return this.state.currentLevelData.words.find(w => w.id === id);
    },

    createInteractiveText: function(text, container) {
        const words = text.split(' ');
        words.forEach(word => {
            const span = document.createElement('span');
            if(word.includes('_')) {
                 span.textContent = word + ' ';
            } else {
                span.className = 'interactive-word';
                span.textContent = word + ' ';
                span.dataset.clean = word.replace(/[^\w]/g, '');
                
                const tip = document.createElement('div');
                tip.className = 'translation-tooltip';
                tip.textContent = '...';
                span.appendChild(tip);
                
                span.onclick = (e) => {
                    e.stopPropagation(); 
                    this.translateWord(span.dataset.clean, tip, span);
                };
            }
            container.appendChild(span);
        });
    },

    attachTranslationListeners: function(container) {
        container.querySelectorAll('.interactive-word').forEach(span => {
            const tip = document.createElement('div');
            tip.className = 'translation-tooltip';
            tip.textContent = '...';
            span.appendChild(tip);

            span.onclick = (e) => {
                e.stopPropagation();
                const word = span.getAttribute('data-word');
                this.translateWord(word, tip, span);
            }
        });
    },

    translateWord: async function(word, tooltip, span) {
        document.querySelectorAll('.interactive-word').forEach(el => el.classList.remove('show-tip'));
        
        span.classList.add('show-tip');
        tooltip.textContent = "Loading...";

        try {
            const response = await fetch(`https://api.mymemory.translated.net/get?q=${word}&langpair=en|uk`);
            const data = await response.json();
            if(data && data.responseData) {
                tooltip.textContent = data.responseData.translatedText.toLowerCase();
            } else {
                tooltip.textContent = "Not found";
            }
        } catch (e) {
            tooltip.textContent = "Error";
            console.error(e);
        }

        setTimeout(() => {
            span.classList.remove('show-tip');
        }, 3000);
    }
};

document.getElementById('home-btn').onclick = () => app.showLevels();
app.init();

</script>
</body>
</html>
    
  </body>
  
</html>
